<!DOCTYPE html>
<html>
<head>
	<title>web socket</title>
</head>
<body>
<input type="text" id="text" />
<button onclick="sendText()">submit</button>
<script>
    var webSocket = new WebSocket("ws://127.0.0.1:8080", "echo-protocol");
    webSocket.onopen = function (event) {
        webSocket.send("Here's some text that the server is urgently awaiting!"); 
    };

    function sendText() {
        // Construct a msg object containing the data the server needs to process the message from the chat client.
        var clientID = "emmanuel";
        var msg = {
            type: "message",
            text: document.getElementById("text").value,
            id:   clientID,
            date: Date.now()
        };

        // Send the msg object as a JSON-formatted string.
        webSocket.send(JSON.stringify(msg));
        
        // Blank the text input element, ready to receive the next line of text from the user.
        document.getElementById("text").value = "";
    }

    webSocket.onmessage = function (event) {
        console.log(event.data);
    }
</script>
</body>
</html>