<!--
<!DOCTYPE html>
<html>
<head>
	<title>web socket</title>
</head>
<body>
<input type="text" id="text" />
<button onclick="sendText()">submit</button>
<script>
    var webSocket = new WebSocket("ws://127.0.0.1:8080", "echo-protocol");
    webSocket.onopen = function (event) {
        webSocket.send("Here's some text that the server is urgently awaiting!"); 
    };

    function sendText() {
        // Construct a msg object containing the data the server needs to process the message from the chat client.
        var clientID = "emmanuel";
        var msg = {
            type: "message",
            text: document.getElementById("text").value,
            id:   clientID,
            date: Date.now()
        };

        // Send the msg object as a JSON-formatted string.
        webSocket.send(JSON.stringify(msg));
        
        // Blank the text input element, ready to receive the next line of text from the user.
        document.getElementById("text").value = "";
    }

    webSocket.onmessage = function (event) {
        console.log(event.data);
    }
</script>
</body>
</html>
-->

<!DOCTYPE html>
<html>
    <head>
    	<title></title>
    	<link href="http://fonts.googleapis.com/css?family=Roboto:400,100,400italic,700italic,700" rel="stylesheet" type="text/css">
    	<link href="http://fonts.googleapis.com/css?family=Open+Sans:400,800italic,800,700italic,700,600italic,400italic,600,300italic,300|Oswald:400,300,700" rel="stylesheet" type="text/css">
    	<link href="style/main.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <div class="main">
        	<form>
        		<div class="input-box">
        			<div class="input-field">
        				<input id="username" type="text" placeholder="" />
        				<label for="username">username</label>
        			</div>
        			
        			<div class="input-field">
        				<input id="password" type="password" placeholder="" />
        				<label for="password">password</label>
        			</div>
        
        			<button class="btn">Login Now</button>
        		</div>
        	</form>
        </div>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script type="text/javascript">
        	var button = document.querySelector("button");
        	var username = document.querySelector("[type=\'text\']");
        	var password = document.querySelector("[type=\'password\']");
        
        	button.addEventListener("click", function(e){
        		e.preventDefault();
        		postRequest(username.value, password.value);
        	});
        	
        	function postRequest(username, password){
        	    var http = new XMLHttpRequest();
                var url = "auth/login";
                var params = {"username":username, "password":password};
                http.open("POST", url, true);
                
                http.setRequestHeader("Content-type", "application/json");
                
                http.onreadystatechange = function() {
                    if(http.readyState == 4 && http.status == 200) {
                        console.log(http.response);
                    }
                }
                http.send(JSON.stringify(params));
        	}
        	
        	$(".input-field input").on("focus", function(e){
        		$(this).addClass("active");
        		$(this).parent().children("label").addClass("active");
        	});
        
        	$(".input-field input").on("blur", function(e){
        		var val = $.trim($(this).val());
        		if (!val) {
        			$(this).parent().children("label").removeClass("active");
        			$(this).removeClass("active");
        
        			$(".input-field input").val(function( index, value ) {
        			  return value.trim();
        			});
        		}
        	});
        	
        	$(document).ready(function(){
        	    setTimeout(function(){
        	        if($(".input-field input").val()){
                	    $(".input-field input").addClass("active");
                		$(".input-field input").parent().children("label").addClass("active");
                	}
        	    }, 200);
        	});
        </script>
    </body>
</html>